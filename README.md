## README

The Benchmark app features functionality typically found in most ecommerce solutions in a very basic way. It allows customers to view products and make orders, while administrator possesses privileges to create, update and delete products. 

The further sections will guide you through deploying the app and setting up the app:

## 1. Setup

The following versions of software products were used in this project:

ruby 2.2.2
PostgreSQL 9.4

Clone the repository in a folder of your choice by running git clone command:

``` git clone repo address ```

cd into directory with the app. Run pending migrations and seed mock data by running the following commands in the shell:


``` bundle ```

``` rake db:create db:migrate db:seed ```

The project relies on Carrierwave, Imagemagick and MiniMagick to do image resizing. For this functionality to work, please install these pre-requisites:

To install Imagemagick on OSX with homebrew type the following:

```
$ brew install imagemagick
```
MiniMagick is a Ruby interface for Imagemagick which is a C program. It needs development headers to be properly compiled. If you're getting an error installing MiniMagick on your system, please install the following package with the appropriate development headers:

``` libmagick9-dev ```

Start a webserver and navigate in a web browser to localhost:3000. You should be taken to the main page of the ecommerce website pre-populated with mock data. 

Search on the website is powered with Sunspot gem that utilizes a pre-packaged distribution of Solr. To be able to use it, you need to start Solr and index products. This can be accomplished with the following commands:

``` rake sunspot:solr:start ```

``` rake sunspot:reindex ```

The app also comes with a few RSpec tests that can be started via shell to make sure the app is running fine. Tests can be triggerred with the following command:

bundle exec rspec

# 2. Application overview

An unauthorized customer can only view products on the website and make orders. Only administrator of the ecommerce website can create new products and categories, as well as edit and delete them.

An unauthorized user can sign up for the website using "Create new account" button in the navigation bar at the top. After that the user will be taken to the registration page. The registration is open and doesn't require any e-mail confirmation and verification. 

The website comes with a wealth of user accounts generated by the db:seed command, and there's a dedicated account for evalution and overview of the functionality.

To log into the website with admin privileges, please use this account:

``` admin@teacommerce.com ```

``` 12345678 ```

Further sections will describe the functionality in greater details

## 2.1 Products

Products can be created by website administrator. New product creation form supports image upload, albeit only one image can be  uploaded for a product.

Products can be edited and removed from Admin Panel. Product can be attacched to a particular category and be created without any category at all.

## 2.2 Categories

Website administrator can also create, edit and delete categories. These actions are also available from Admin Panel. 

An important note is that categories that have subcategories or dependent products cannot be removed until their child items are removed as well. 

Category list in the sidebar available on every webpage will take you to a category page with all products contained in the selected category (products from subcategories are not included)

## 2.3 Search

Search box in the sidebar will automatically include products from subcategories if scoped to a category that has child items. Solr (through Sunspot gem) is a powerful engine that make even sophisticated search queries possible. This ensures space for further improvement of search should this be required. 

## 2.4 Orders

A customer can create orders without registration. Nevertheless, Devise authorization is available and allows for any user to create an account. Creating an account doesn't give any additional functionality, but was left in the project as an essential component of any ecommerce platform.

## 3 Process description and priorities

The project followed top-down approach: model structure was designed first, followed by controller logic and views. Refactoring of the previously completed steps was performed on as-needed basis and could be accomplished at other steps to satisfy feature requirements.

Time was spread evenly between each feature, however if the allotted period wasn't enough for the feature, only the core functionality was implemented.


## 3.1 Limitations
 
To speed up the development process while recognizing the value of proper timing, several pronciples were severely simplified. 

First and foremost, cart is implemented as a model. Cart has dependent line items that are not deleted from the database. The rationale of this logic is that Order entities have direct access to the information related to line items. This would never be acceptable in a production environment due to the orphaned database entities. A solution could be to copy data from the cart into a join table, however it was not implemented for the sake of simplicity. 

Another point to note is that products are deleted which is likely to cause issues with dependent entities. The correct approach is to mark critical objects as deleted as opposed to permanently removing them from the database. Another approach is to copy the required data to an independent entity and use that as a source of information for the dependent objects as opposed to relying on an object that might have been deleted. 

Currently the blog implements subcategories, however this imposes restrictions on category CRUD: a category that has child subcategories cannot be deleted. A sophisticated check is required otherwise to prevent a case of infinite loops.

## 3.1 Testing methodology

Controllers were selected as the primary target for testing. Tests ensure CRUD actions work in a proper way and thus guarantee the core functionality works. Indirectly, controller tests also verify model valiidations when the tests is trying to save an object with invalid attributes.







